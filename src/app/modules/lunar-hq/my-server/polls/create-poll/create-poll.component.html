<app-why-header-side-nav
  [title]="'my servers'"
  [activeTab]="'MY SERVERS'"
  [activeSubMenuTab]="discordServerName"
  [nestedMenuSelected]="'Polls'"
  (profileClick)="navigateToPolls()">
  <div class="search-bar">
    <div class="align-items-center col-3">
      <div class="pd-left-24 pd-right-24">
        <app-why-cta-three
          [btnClass]="cssClass.cta3Primary + ' backBtn'"
          [btnLabel]="'Back'"
          [leftIconType]="'chevron-back'"
          [iconClass]="cssClass.cta3PrimaryIcon"
          (click)="navigateBack()">
        </app-why-cta-three>
      </div>
    </div>

    <div class="col-9">
      <div class="d-flex align-items-center pd-right-24">
        <div id="stepper1" class="">
          <div class="step-container">
            <div (click)="viewStep(0)" class="step-label-wrapper">
                  <span class="app-why-lbl f10 text-center light-50 ft-lato"
                        [ngClass]="{'secondary': stepperIndex === 0, 'primary': stepperIndex > 0}">POLL DETAILS</span>
            </div>
            <div (click)="viewStep(1)" class="step-label-wrapper">
                  <span class=" app-why-lbl f10 text-center light-50 ft-lato"
                        [ngClass]="{'secondary': stepperIndex === 1, 'primary': stepperIndex > 1}">VOTING SYSTEM</span>
            </div>
            <div (click)="viewStep(2)" class="step-label-wrapper">
                  <span class=" app-why-lbl f10 text-center light-50 ft-lato"
                        [ngClass]="{'secondary': stepperIndex === 2, 'primary': stepperIndex > 2}">TIMINGS</span>
            </div>
            <div (click)="viewStep(3)" class="step-label-wrapper">
                  <span class=" app-why-lbl f10 text-center light-50 ft-lato"
                        [ngClass]="{'secondary': stepperIndex === 3, 'primary': stepperIndex > 3}">SELECT CHANNEL</span>
            </div>
            <div (click)="viewStep(4)" class="step-label-wrapper">
                  <span class=" app-why-lbl f10 text-center light-50 ft-lato"
                        [ngClass]="{'secondary': stepperIndex === 4, 'primary': stepperIndex > 4}">PREVIEW</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <article class="mr-top-56 form-wrapper">
    <div>
      <div *ngIf="stepperIndex === 0" class="content">
        <div class="create-poll-widget d-flex flex-column pd-top-24 pd-lr-40">
          <div class="d-flex justify-content-between">
            <div class="app-why-lbl f16 ft-500 light no-letter-spacing">{{stepTitle}}</div>
          </div>
          <div class="title-underline mr-top-8"></div>
          <div class="">
            <div class="mr-top-48 pd-lr-78 form-control-wrapper">
              <div class="form-group">
                <input type="text" id="name" class="form-control app-why-floating-input light-70"
                       placeholder=" " [(ngModel)]="pollObj.title">
                <label class="app-why-floating-lbl" for="name">Name</label>
              </div>
              <div class="app-why-lbl error ft-lato"
                   *ngIf="errorMessage.id ==='title' && pollObj.title !== ''">{{errorMessage.msg}}</div>
              <div class="form-group mr-top-40 mr-bottom-84">
                <label class="d-flex app-why-lbl ft-lato f10 light-50"
                       for="poll_description">Description</label>
                <textarea name="poll_description"
                          class="app-why-lbl f16 ft-lato light-70 mr-top-4 description_area no-letter-spacing pd-top-8 pd-bottom-8 pd-lr-16"
                          id="poll_description" maxlength="2000"
                          (keyup)="countCharacter()"
                          [(ngModel)]="pollObj.description"
                          placeholder="Enter description"></textarea>
                <div class="d-flex justify-content-between app-why-lbl f10 ft-lato light-50"
                     id="description_count">
                  <div>
                    <div class="app-why-lbl error ft-lato"
                         *ngIf="errorMessage.id ==='description'">{{errorMessage.msg}}</div>
                  </div>
                  <div>
                    <span id="current_count">0 &nbsp;</span>
                    <span id="maximum_count"> / 2000</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="stepperIndex === 1" class="content">
        <div class="create-poll-widget d-flex flex-column pd-top-24 pd-lr-40 pd-bottom-48">
          <div class="d-flex justify-content-between">
            <div class="app-why-lbl f16 ft-500 light no-letter-spacing">VOTE WEIGHT</div>
          </div>
          <div class="title-underline mr-top-8"></div>
          <div class="create-rule-content mr-top-40">
            <div class="d-flex align-items-center">
              <input type="radio" class="radio-button-primary"
                     id="tokenWeighted" name="filter"
                     [checked]="voteWeight === 'tokenWeighted'"
                     (click)="setWeight('tokenWeighted')"
                     value="filter_traits">
              <label class="app-why-lbl f12 mr-left-8 text-uppercase"
                     [ngClass]="{'primary': voteWeight === 'tokenWeighted', 'light-50': voteWeight !== 'tokenWeighted'}">
                token weighted
              </label>
            </div>
            <div class="mr-top-16 d-flex" *ngIf="voteWeight === 'tokenWeighted'">
              <div class="col-3">
                <div>
                  <div class="app-why-lbl light-50">Network</div>
                  <div class="pd-top-4">
                    <div>
                      <div ngbDropdown container="body">
                        <button type="button"
                                class="link-dropdown no-width app-why-lbl f12 ft-bold light text-uppercase"
                                id="dropdownBasic1"
                                ngbDropdownToggle>{{selectedNetwork}}
                        </button>
                        <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                          <div *ngFor="let list of ['Polygon','Terra', 'Terra Classic']">
                            <button ngbDropdownItem
                                    (click)="setBlockChain(list)"
                                    class="app-why-lbl f12 ft-bolt dark no-letter-spacing text-uppercase">{{list}}</button>
                            <div class="dropdown-divider"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-6">
                <div class="max-width-240">
                  <div class="app-why-lbl light-50"
                       [ngClass]="{'secondary': pollObj.address === undefined}">Contract address
                  </div>
                </div>
                <div class="max-width-240">
                  <div class="form-group">
                    <input type="text" class="form-control app-why-floating-input light-70"
                           placeholder="Enter contract address"
                           [ngClass]="{'set-input-border': pollObj.address === undefined}"
                           [(ngModel)]="pollObj.address">
                  </div>
                </div>
              </div>
              <div class="col-3">
                <div class="max-width-240">
                  <div class="app-why-lbl light-50"
                       [ngClass]="{'secondary': pollObj.numberPerVote === undefined}">Number per vote
                  </div>
                </div>
                <div class="max-width-240">
                  <div class="form-group">
                    <input type="number" class="form-control app-why-floating-input light-70"
                           placeholder="Enter contract address"
                           [ngClass]="{'set-input-border': pollObj.numberPerVote === undefined}"
                           [(ngModel)]="pollObj.numberPerVote">
                  </div>
                </div>
              </div>
            </div>

            <div class="d-flex align-items-center mr-top-40">
              <input type="radio" class="radio-button-primary"
                     id="roleWeighted" name="filter"
                     (click)="setWeight('roleWeighted')"
                     [checked]="voteWeight === 'roleWeighted'"
                     value="filter_traits">
              <label class="app-why-lbl f12 mr-left-8 text-uppercase"
                     [ngClass]="{'primary': voteWeight === 'roleWeighted', 'light-50': voteWeight !== 'roleWeighted'}">
                role weighted
              </label>
            </div>
          </div>

          <div class="mr-top-40" *ngIf="voteWeight === 'roleWeighted'">
            <div class="rules-detail-title pd-top-16 pd-bottom-16 d-flex flex-row pd-right-40">
              <div class="form-check">
                <input class="form-check-input check-box" type="checkbox" value="" id="rule-name">
              </div>
              <div class="rule-name-title app-why-lbl f10 ft-lato light-50 letter-spacing-02">
                RULE NAME
              </div>
              <div class="population-title app-why-lbl f10 ft-lato light-50 letter-spacing-02">
                POPULATION
              </div>
              <div class="chain-title app-why-lbl f10 ft-lato light-50 letter-spacing-02">
                CHAIN
              </div>
            </div>
            <div class="rules-item d-flex flex-row align-items-center" *ngFor="let rule of roleList">
              <div class="form-check d-flex align-items-center">
                <input class="form-check-input check-box" type="checkbox" value="" id="{{rule?.roleName}}">
              </div>
              <div class="rules-item-name d-flex align-items-center pd-left-16 app-why-lbl f16 ft-500 light">
                {{rule?.roleName}}
              </div>
              <div class="divider"></div>
              <div class="rules-item-population d-flex align-items-center pd-left-16 app-why-lbl f16 ft-500 light">
                {{rule?.population}}
              </div>
              <div class="divider"></div>
              <div class="rules-item-chain d-flex justify-content-between">
                <div
                  class="pd-left-16 app-why-lbl f16 ft-500 light server-text-container">{{rule?.blockchainName}}</div>
                <div class="rules-item-chain-icon">
                  <img class="rules-item-chain-icon-container mr-right-16" imgFallback
                       src="{{rule?.discordServerImage}}" alt="drop">
                </div>
              </div>
              <div class="divider"></div>
              <div class="rules-item-view visit-button d-flex justify-content-center">
                <div class="pd-left-20 app-why-lbl f12 ft-bold light-50 letter-spacing-047">VISIT</div>
                <ion-icon name="chevron-forward-outline" class="app-why-icon light-50 ic20"></ion-icon>
              </div>
            </div>
          </div>
        </div>
        <div class="create-poll-widget height-192 d-flex flex-column pd-top-24 pd-lr-40 mr-top-8">
          <div class="d-flex justify-content-between">
            <div class="app-why-lbl f16 ft-500 light no-letter-spacing">SET QUORUM</div>
          </div>
          <div class="title-underline mr-top-8"></div>
          <div class="create-rule-content mr-top-40 d-flex align-items-center">
            <div class="col-3">
              <div ngbDropdown container="body">
                <button type="button"
                        class="link-dropdown no-width app-why-lbl f12 ft-bold light text-uppercase"
                        id="quorum"
                        ngbDropdownToggle>Percentage
                </button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                </div>
              </div>
            </div>
            <div class="col-6">
              <app-why-slider (rangeValue)="setRangValue($event)"></app-why-slider>
            </div>
            <div class="col-3">
              <div class="max-width-240">
                <div class="app-why-lbl light-50">Set Value
                </div>
              </div>
              <div class="max-width-240">
                <div class="form-group">
                  <input type="text" class="form-control app-why-floating-input light-70"
                         placeholder="20%"
                         [(ngModel)]="value">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="stepperIndex === 2" class="content text-center">
        <div class="create-poll-widget d-flex flex-column pd-top-24 pd-lr-40">
          <div class="d-flex justify-content-between">
            <div class="app-why-lbl f16 ft-bold light no-letter-spacing">POLL TIMINGS</div>
            <div class="buy-license d-flex- app-why-lbl f12 ft-bold primary">
              <div class="d-flex overflow-hidden">
                <div ngbDropdown container="body">
                  <button type="button" class="link-dropdown app-why-lbl f12 ft-bold primary"
                          ngbDropdownToggle> TIMEZONE: {{selectedTimeZone}}
                  </button>
                  <div ngbDropdownMenu aria-labelledby="dropdownBasic">
                    <button ngbDropdownItem class="pd-left-24 app-why-lbl f12 ft-bold no-letter-spacing"
                            (click)="selectTimeZone('UTC')">UTC
                    </button>
                    <div class="dropdown-divider"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="title-underline mr-top-8"></div>
          <div class="poll-timing-content mr-top-48">
            <div class="text-align-start d-flex align-items-center">
              <input class="radio-button-primary" type="radio" (click)="getDatePicker('today')"
                     name="dateSelected" id="today">
              <label class="app-why-lbl mr-left-8 light-70 f12" for="today">TODAY</label>
            </div>
            <div class="d-flex mr-top-16 mr-left-20 justify-content-between"
                 *ngIf="dateRadioSelected === 'today'">
              <div class="d-flex flex-column">
                <label class="app-why-lbl f-10 ft-lato secondary text-start mr-bottom-2">
                  Start time: </label>
                <input class="form-control date-time-input" type="time" [(ngModel)]="startTime"/>
              </div>
              <div class="d-flex flex-column">
                <label class="app-why-lbl f-10 ft-lato secondary text-start mr-bottom-2" for="closingDate">Closing
                  Date: </label>
                <input class="form-control date-time-input" type="date"
                       [min]="todayDate | date :'yyyy-MM-dd'"
                       id="closingDate" [(ngModel)]="closingDate"/>
              </div>
              <div class="d-flex flex-column">
                <label class="app-why-lbl f-10 ft-lato secondary text-start mr-bottom-2">Closing
                  Time: </label>
                <input class="form-control date-time-input" type="time"
                       [(ngModel)]="closingTime"/>
              </div>
            </div>
            <div class="mr-top-16 text-align-start d-flex align-items-center">
              <input class="radio-button-primary" type="radio" (click)="getDatePicker('pick_date')"
                     name="dateSelected" id="pick_date">
              <label class="pd-left-6 app-why-lbl pd-top-2 mr-left-8 light-70 f12" for="pick_date">PICK
                DATE</label>
            </div>
            <div class="d-flex mr-top-16 mr-left-20 justify-content-between"
                 *ngIf="dateRadioSelected === 'pick_date'">
              <div class="d-flex flex-column">
                <label class="app-why-lbl f-10 ft-lato secondary text-start mr-bottom-2">
                  Start Date: </label>
                <input class="form-control date-time-input" type="date"
                       [min]="todayDate | date :'yyyy-MM-dd'"
                       (ngModelChange)="validateClosingDateFn($event)"
                       id="pickStartDate" [(ngModel)]="startDate"/>
              </div>
              <div class="d-flex flex-column">
                <label class="app-why-lbl f-10 ft-lato secondary text-start mr-bottom-2">
                  Start time: </label>
                <input class="form-control date-time-input" type="time" id="pickStartTime" [(ngModel)]="startTime"/>
              </div>
              <div class="d-flex flex-column">
                <label class="app-why-lbl f-10 ft-lato secondary text-start mr-bottom-2">
                  Closing Date: {{validateClosingDate | date :'yyyy-MM-dd'}}</label>
                <input class="form-control date-time-input" type="date"
                       [min]="validateClosingDate | date :'yyyy-MM-dd'"
                       id="pickClosingDate" [(ngModel)]="closingDate">
              </div>
              <div class="d-flex flex-column">
                <label class="app-why-lbl f-10 ft-lato secondary text-start mr-bottom-2">
                  Closing Time: </label>
                <input class="form-control date-time-input" type="time" id="pickClosingTime" [(ngModel)]="closingTime"/>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="stepperIndex === 3" class="content text-center">
        <div class="create-poll-widget add-min-ht d-flex flex-column pd-top-24 pd-lr-40">
          <div class="d-flex justify-content-between">
            <div class="app-why-lbl f16 ft-bold light no-letter-spacing">{{stepTitle}}</div>
          </div>
          <div class="title-underline mr-top-8"></div>
          <div class="create-rule-content mr-top-48">
            <app-why-drop-down [leftIcon]="true" [dataList]="channelList"
                               [placeholderText]="'Select Channel'"
                               [keyField]="'name'"
                               (dataSet)="setChannel($event)"></app-why-drop-down>
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex navigate-steps mr-top-24 mr-bottom-80">
      <div class="col-3 add-cursor">
                      <span>
                        <ion-icon name="save-outline" class="app-why-icon ic12 light-50"></ion-icon>
                        <label class="align-text-top app-why-lbl f12 ft-bold light-50 mr-left-8">SAVE DRAFT</label>
                      </span>
      </div>
      <div class="d-flex justify-content-end col-9">
        <app-why-lunar-hq-cta-two [btnLabel]="'BACK'" [btnTheme]="'bg--dark'"
                                  [buttonSize]="'sm'" [btnDisabled]="stepperIndex === 0"
                                  (click)="previous()" [btnLabelClass]="'app-why-lbl f12 ft-lato ft-bold'">
        </app-why-lunar-hq-cta-two>
        <app-why-cta-one *ngIf="stepperIndex < 3" (click)="next()"
                         [cssClass]="cssClass.cta1Sm + ' mr-left-24'"
                         [btnLabel]="'NEXT'">
        </app-why-cta-one>
        <app-why-cta-one *ngIf="stepperIndex === 3" (click)="viewStep(4)"
                         [cssClass]="cssClass.cta1Sm + ' mr-left-24'"
                         [btnLabel]="'PREVIEW'">
        </app-why-cta-one>
      </div>
    </div>

  </article>

  <div class="preview-container" *ngIf="viewPreview">
    <app-why-lunar-hq-preview-poll
      [pollObj]="pollObj"
      [detailsObj]="detailsObj"
      (createPollEvent)="createPoll()"
      (closeEvent)="closePreview()"></app-why-lunar-hq-preview-poll>
  </div>
</app-why-header-side-nav>
